name: Organize Labels

on:
    issues:
        types: [labeled]

jobs:
    assign_concepts:
        name: "Enhancement Label Automation"
        if: github.event.label.name == 'enhancement'
        runs-on: ubuntu-latest
        steps:
            -   name: Create or Update Project Card
                id: coupc
                uses: peter-evans/create-or-update-project-card@v2
                with:
                    token: ${{ secrets.UNITY_PAT }}
                    project-location: KBVE
                    project-name: KBVE
                    column-name: Theory
      
            - uses: kalgurn/update-project-item-status@main
              with:
                project-url: https://github.com/orgs/KBVE/projects/5
                github-token: ${{ secrets.UNITY_PAT }}
                item-id: ${{ steps.coupc.outputs.card-id }}
                status: "Matrix: 0"

    assign_bug:
        name: "Bug Label Automation"
        if: github.event.label.name == 'bug'
        runs-on: ubuntu-latest
        steps:
            -   uses: actions/checkout@v4
            -   uses: ./.github/actions/gql-project-mirgration
                with:
                    token: ${{ secrets.UNITY_PAT }}
                    key: "Status"
                    value: "Error"
                    idref: ${{ github.event.issue.number }}

    