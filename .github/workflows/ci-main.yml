name: CI - Main

on:
    workflow_dispatch:
    push:
         branches:
             - main

# permissions:
#     actions: write
#     contents: write
#     pages: write
#     id-token: write

jobs:
    alter:
        runs-on: ubuntu-latest
        name: File Alterations
        steps:
            -   name: Checkout the repository using git
                uses: actions/checkout@v4
                with:
                    fetch-depth: 1
            
            -   name: File Changes
                id: delta
                uses: tj-actions/changed-files@v39
                with:
                  files_yaml: |
                    herbmail:
                        - 'apps/herbmail.com/**'
                    kbve: 
                        - 'apps/kbve.com/**'
                    rareicon:
                        - 'apps/rareicon.com/**'
                    discordsh:
                        - 'apps/discord.sh/**'

            -   name: Delta HerbMail
                if: steps.delta.outputs.herbmail_any_changed == 'true'  
                run: |
                    echo "One or more HerbMail file(s) has changed."
                    echo "List all the files that have changed: ${{ steps.delta.outputs.herbmail_all_changed_files }}"
            
            -   name: Delta KBVE
                if: steps.delta.outputs.kbve_any_changed == 'true'  
                run: |
                        echo "One or more KBVE file(s) has changed."
                        echo "List all the files that have changed: ${{ steps.delta.outputs.kbve_all_changed_files }}"
                
            -   name: Delta RareIcon
                if: steps.delta.outputs.rareicon_any_changed == 'true'
                run: |
                        echo "Changes in RareIcon file(s) has changed."
                        echo "List all the files that have changed: ${{ steps.delta.outputs.rareicon_all_changed_files }}"
            
            -   name: Delta Discordsh
                if: steps.delta.outputs.discordsh_any_changed == 'true'
                run: |
                        echo "Changes in DiscordSh file(s) has changed."
                        echo "List all the files that have changed: ${{ steps.delta.outputs.discordsh_all_changed_files }}"